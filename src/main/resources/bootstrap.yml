micronaut:
  server:
    port: 18086
    cors:
      enabled: true
      configurations:
        web:
          allowedOrigins:
          - http://localhost:3000
          - http://foo.com
          - ^http(|s)://www\.google\.com$
          allowedMethods:
          - GET
          - POST
          - OPTIONS

  router:
    static-resources:
      public:
        enabled: true
        paths: classpath:public
        mapping: /**
  application:
    name: smokefree-initiative-service
  security:
    enabled: true
    endpoints:
      login:
        enabled: true
      logout:
        enabled: true
      oauth:
        # TODO: is oauth needed? we're not refreshing on the server when 'implicit grant' flow?
        enabled: true
      beans:
        enabled: true
        sensitive: true
      info:
        enabled: true
        sensitive: false
    intercept-url-map:
    - pattern: /schema.graphql
      http-method: GET
      access:
      - isAnonymous()
    token:
      enabled: true
      jwt:
        enabled: true
        algorithm: HS256
        bearer:
          enabled: true
          header-name: "Authorization"
          prefix: "Bearer"
        signature:
          enabled: true
          rsa:
            enabled: true
            algorithm: HS256

---
# https://docs.micronaut.io/latest/guide/index.html#jsonBinding
jackson:
  serialization:
    indentOutput: true
    writeDatesAsTimestamps: false
  deserialization:
    useBigIntegerForInts: true
    failOnUnknownProperties: false

# AWS secret Manager holds RDS details securely, that's because we do not need below database details here anymore
aws:
  rds:
    jdbcdriverclass: com.mysql.jdbc.Driver

# AWS Secret Manager instance id and region
secret:
  name: dev/smokefree/rds-secret-1504
  region: eu-west-1

datasources:
  default:
    url: jdbc:mysql://localhost:3306/smokefree
    username: root
    password: root
    driverClassName: com.mysql.jdbc.Driver